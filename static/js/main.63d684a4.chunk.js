(this["webpackJsonpsimviz-react-example"]=this["webpackJsonpsimviz-react-example"]||[]).push([[0],Array(22).concat([function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(56),t),r(i(57),t),r(i(58),t),r(i(67),t),r(i(37),t),r(i(68),t)},,,,,function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(69),t),r(i(73),t)},,,,,,function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(74),t),r(i(80),t)},function(e,t,i){e.exports={container:"ping-pong_container__1BEpQ",network:"ping-pong_network__3B9yo",history:"ping-pong_history__1lNl_"}},,,function(e,t,i){"use strict";var n=i(16),r=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.Packet=void 0;var o=function(){function e(t,i,r){n(this,e),this._type=t,this._body=i,this._metadata=r}return r(e,[{key:"body",get:function(){return this._body}},{key:"metadata",get:function(){return this._metadata}},{key:"type",get:function(){return this._type}}]),e}();t.Packet=o},function(e,t,i){"use strict";var n=i(16),r=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.PacketView=void 0;var o=i(71),s={radius:10,color:"#0000ee"},a=function(){function e(t,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(this,e),this._packet=t,this._sender=i,this._receiver=r,this._options=Object.assign(Object.assign({},s),o),this._origin=i.origin,this._from=i.origin,this._to=r.origin,this.update(t.metadata.sentAt)}return r(e,[{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._to}},{key:"origin",get:function(){return this._origin}},{key:"id",get:function(){return this._packet.metadata.id}},{key:"body",get:function(){return this._packet.body}},{key:"metadata",get:function(){return this._packet.metadata}},{key:"type",get:function(){return this._packet.type}},{key:"options",get:function(){return this._options}},{key:"update",value:function(e){var t=(0,o.segmentCircleIntersection)(this._sender.origin,this._sender.options.radius,this._sender.origin,this._receiver.origin)||this._sender.origin,i=(0,o.segmentCircleIntersection)(this._receiver.origin,this._receiver.options.radius,this._receiver.origin,this._sender.origin)||this._receiver.origin;this._from=t,this._to=i;var n=e-this._packet.metadata.sentAt,r=this._packet.metadata.sentAt+this._packet.metadata.latency-e;if(0!==r){var s=n/r,a=(t.x+i.x*s)/(1+s),c=(t.y+i.y*s)/(1+s);this._origin={x:a,y:c}}else this._origin=i}}]),e}();t.PacketView=a},function(e,t,i){"use strict";var n=i(16),r=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.NodeView=void 0;var o={radius:40,color:"#eeeeee"},s=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),this._node=t,this._origin={x:0,y:0},this._options=Object.assign(Object.assign({},o),i)}return r(e,[{key:"x",get:function(){return this._origin.x}},{key:"y",get:function(){return this._origin.y}},{key:"origin",get:function(){return this._origin}},{key:"id",get:function(){return this._node.id}},{key:"options",get:function(){return this._options}},{key:"state",get:function(){return this._node.state}},{key:"move",value:function(e){this._origin=e}}]),e}();t.NodeView=s},,,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,i){"use strict";var n=i(16),r=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.Timeline=void 0;var o=function(){function e(){n(this,e),this._logicTime=0,this._subscribers=new Set}return r(e,[{key:"logicTime",get:function(){return this._logicTime}},{key:"tick",value:function(e){var t=this;this._logicTime+=e,this._subscribers.forEach((function(e){return e(t._logicTime)}))}},{key:"subscribeTick",value:function(e){var t=this;return this._subscribers.add(e),function(){return t._subscribers.delete(e)}}}]),e}();t.Timeline=o},function(e,t,i){"use strict";var n=i(24),r=i(16),o=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.Network=t.constantLatencyProvider=void 0;var s=i(37),a=i(62);function c(e){return function(){return e}}t.constantLatencyProvider=c;var u={latencyProvider:c(500)},d=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e),this._timeline=t,this._history=i,this._packetCounter=0,this._inflightPackets=new Map,this._pendingPackets=[],this._nodes=new Map,this._tickUnsubscribe=void 0,this._nodesSubscriptions=new Set,this._packetsSubscriptions=new Set,this._options=Object.assign(Object.assign({},u),n)}return o(e,[{key:"nodes",get:function(){return Array.from(this._nodes.values())}},{key:"start",value:function(){var e=this;this._tickUnsubscribe||(this._tickUnsubscribe=this._timeline.subscribeTick((function(t){return e.onTick(t)})))}},{key:"stop",value:function(){this._tickUnsubscribe&&this._tickUnsubscribe()}},{key:"registerNode",value:function(e){this._nodes.set(e.id,e),this.notifyNode("reg",e)}},{key:"unregisterNode",value:function(e){var t=this._nodes.get(e);t&&(this._nodes.delete(e),this.notifyNode("unreg",t))}},{key:"sendPacket",value:function(e,t,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,u={id:this._packetCounter++,latency:void 0===o?this.getLatency():o,receiver:r,sender:i,sentAt:this._timeline.logicTime+(null!==c&&void 0!==c?c:0)},d=new s.Packet(e,t,u);return c?(this._pendingPackets=[].concat(n(this._pendingPackets),[{packet:d,senderState:(0,a.deepClone)(i.state)}]).sort((function(e,t){return e.packet.metadata.sentAt-t.packet.metadata.sentAt})),d):(this.addInflight(d),this._history.add({type:"send",packet:d,nodeState:(0,a.deepClone)(i.state)}),this.notifyPacket("sent",d),d)}},{key:"subscribeNodes",value:function(e){var t=this;return this._nodesSubscriptions.add(e),function(){return t._nodesSubscriptions.delete(e)}}},{key:"subscribePackets",value:function(e){var t=this;return this._packetsSubscriptions.add(e),function(){return t._packetsSubscriptions.delete(e)}}},{key:"getLatency",value:function(){return this._options.latencyProvider(this)}},{key:"addInflight",value:function(e){this._inflightPackets.set(e.metadata.id,e)}},{key:"removeInflight",value:function(e){this._inflightPackets.delete(e)}},{key:"onTick",value:function(e){var t=this;this._pendingPackets.forEach((function(i){i.packet.metadata.sentAt<=e&&(t.addInflight(i.packet),t._history.add({type:"send",packet:i.packet,nodeState:i.senderState}),t.notifyPacket("sent",i.packet))})),this._pendingPackets=this._pendingPackets.filter((function(t){return t.packet.metadata.sentAt>e})),this._inflightPackets.forEach((function(i,n){i.metadata.sentAt+i.metadata.latency<=e&&(t.onPacketReceived(i),t.removeInflight(n),t.notifyPacket("received",i))}))}},{key:"onPacketReceived",value:function(e){var t=this._nodes.get(e.metadata.receiver.id);t&&(t.processPacket(e),this._history.add({type:"receive",packet:e,nodeState:(0,a.deepClone)(t.state)}))}},{key:"notifyPacket",value:function(e,t){this._packetsSubscriptions.forEach((function(i){return i({type:e,packet:t})}))}},{key:"notifyNode",value:function(e,t){this._nodesSubscriptions.forEach((function(i){return i({type:e,node:t})}))}}]),e}();t.Network=d},,,,function(e,t,i){"use strict";var n=i(63),r=i(25);Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=void 0,t.deepClone=function e(t){return"object"!==typeof t||null===t?t:t instanceof Set?new Set(Array.from(t,e)):t instanceof Map?new Map(Array.from(t,(function(t){var i=r(t,2);return[i[0],e(i[1])]}))):t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):Object.keys(t).reduce((function(i,r){return Object.assign(i,n({},r,e(t[r])))}),Array.isArray(t)?[]:{})}},,,,,function(e,t,i){"use strict";var n=i(16),r=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;var o=function(){function e(t,i,r){n(this,e),this._id=t,this._network=i,this._state=r,this._handlers=new Map}return r(e,[{key:"id",get:function(){return this._id}},{key:"state",get:function(){return this._state}},{key:"send",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return this._network.sendPacket(e,t,this,i,n,r)}},{key:"processPacket",value:function(e){var t=this._handlers.get(e.type);t&&t(e,this._state)}},{key:"registerHandler",value:function(e,t){var i=this;this._handlers.set(e,(function(e,n){return i._state=t(e,n)}))}},{key:"unregisterHandler",value:function(e){this._handlers.delete(e)}}]),e}();t.Node=o},function(e,t,i){"use strict";var n=i(24),r=i(16),o=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkHistory=void 0;var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;r(this,e),this._retention=t,this._history=[]}return o(e,[{key:"history",get:function(){return this._history}},{key:"add",value:function(e){this._history=[].concat(n(this._history),[e]),this.retain()}},{key:"clear",value:function(){this.retain(0)}},{key:"retain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=void 0===e?this._retention:e,i=this._history.length-t;i<=0||this._history.splice(0,i)}}]),e}();t.NetworkHistory=s},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(70),t),r(i(38),t),r(i(39),t),r(i(72),t)},function(e,t,i){"use strict";var n=i(24),r=i(16),o=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkView=t.goldenAngleColorGenerator=void 0;var s=i(38),a=i(39);t.goldenAngleColorGenerator=function(e){return"hsl(".concat(137.508*e,",50%,75%)")};var c={nodeArrageRadius:400,nodeColorGenerator:t.goldenAngleColorGenerator,packetOptionsFactory:function(){return{}}},u=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._netowork=t,this._nodes=[],this._packets=[],this._nodeCounter=0,this._nodesSubscriptions=new Set,this._packetsSubscriptions=new Set,t.nodes.forEach((function(e){return i.addNode(e)})),this._nodeSubscription=t.subscribeNodes((function(e){return i.onNode(e)})),this._packetSubscription=t.subscribePackets((function(e){return i.onPacket(e)})),this._options=Object.assign(Object.assign({},c),n)}return o(e,[{key:"nodes",get:function(){return this._nodes}},{key:"packets",get:function(){return this._packets}},{key:"options",get:function(){return this._options}},{key:"destroy",value:function(){this._nodeSubscription(),this._packetSubscription()}},{key:"subscribeNodes",value:function(e){var t=this;return this._nodesSubscriptions.add(e),function(){return t._nodesSubscriptions.delete(e)}}},{key:"subscribePackets",value:function(e){var t=this;return this._packetsSubscriptions.add(e),function(){return t._packetsSubscriptions.delete(e)}}},{key:"onNode",value:function(e){switch(e.type){case"reg":this.addNode(e.node);break;case"unreg":this.removeNode(e.node)}}},{key:"createNodeView",value:function(e){return new a.NodeView(e,{color:this._options.nodeColorGenerator(this._nodeCounter,e,this._netowork)})}},{key:"addNode",value:function(e){var t;this._nodes=[].concat(n(this._nodes),[this.createNodeView(e)]),this.arrangeNodes(this._options.nodeArrageRadius),this._nodeCounter++,null===(t=this._nodesSubscriptions)||void 0===t||t.forEach((function(e){return e()}))}},{key:"removeNode",value:function(e){var t;this._nodes=this._nodes.filter((function(t){return t.id!==e.id})),this.arrangeNodes(this._options.nodeArrageRadius),null===(t=this._nodesSubscriptions)||void 0===t||t.forEach((function(e){return e()}))}},{key:"arrangeNodes",value:function(e){var t=this;this._nodes.forEach((function(i,n){var r=Math.cos(Math.PI-2*n*Math.PI/t._nodes.length)*e,o=-Math.sin(Math.PI-2*n*Math.PI/t._nodes.length)*e;i.move({x:r,y:o})}))}},{key:"findNodeView",value:function(e){return this._nodes.find((function(t){return t.id===e}))}},{key:"onPacket",value:function(e){switch(e.type){case"sent":this.addPacket(e.packet);break;case"received":this.removePacket(e.packet)}}},{key:"createPacketView",value:function(e){var t=this.findNodeView(e.metadata.sender.id),i=this.findNodeView(e.metadata.receiver.id);if(t&&i)return new s.PacketView(e,t,i,this._options.packetOptionsFactory(e.metadata.id,e,this._netowork))}},{key:"addPacket",value:function(e){var t,i=this.createPacketView(e);i&&(this._packets=[].concat(n(this._packets),[i]),null===(t=this._packetsSubscriptions)||void 0===t||t.forEach((function(e){return e()})))}},{key:"removePacket",value:function(e){var t;this._packets=this._packets.filter((function(t){return t.id!==e.metadata.id})),null===(t=this._packetsSubscriptions)||void 0===t||t.forEach((function(e){return e()}))}}]),e}();t.NetworkView=u},function(e,t,i){"use strict";function n(e,t,i){return Math.abs(e-t)<=i}function r(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return n(e,t,i)?0:e-t}Object.defineProperty(t,"__esModule",{value:!0}),t.segmentCircleIntersection=void 0,t.segmentCircleIntersection=function(e,t,i,o){var s=Math.hypot(i.x-e.x,i.y-e.y),a=Math.hypot(o.x-e.x,o.y-e.y);if(!(s>t&&a>t)&&!(s<t&&a<t)){var c=function(e,t,i,r){var o=e.x*e.x+e.y*e.y-t*t,s=-2*e.x,a=-2*e.y,c=i.x*r.y-r.x*i.y,u=i.y-r.y,d=i.x-r.x;n(d,0,.001)&&(d=.001);var h=d*d+u*u,l=d*d*s+2*c*u+d*a*u,f=l*l-4*h*(o*d*d+c*c+d*a*c);if(f<0)return[];if(f<.001){var v=-l/(2*h);return[{x:v,y:(u*v+c)/d}]}var y=(-l+Math.sqrt(f))/(2*h),p=(u*y+c)/d,_=(-l-Math.sqrt(f))/(2*h);return[{x:y,y:p},{x:_,y:(u*_+c)/d}]}(e,t,i,o);if(!(c.length<1)){var u=Math.min(i.x,o.x),d=Math.max(i.x,o.x),h=Math.min(i.y,o.y),l=Math.max(i.y,o.y);return r(c[0].x,u)>=0&&r(c[0].x,d)<=0&&r(c[0].y,h)>=0&&r(c[0].y,l)<=0?c[0]:r(c[1].x,u)>=0&&r(c[1].x,d)<=0&&r(c[1].y,h)>=0&&r(c[1].y,l)<=0?c[1]:void 0}}}},function(e,t,i){"use strict";var n=i(16),r=i(17);Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryView=t.NodeHistoryTimelineView=t.NetworkHistoryEventView=void 0;var o=function(){function e(t){n(this,e),this._packet=t,this._from={x:0,y:0},this._to={x:0,y:0},this._typeOrigin={x:0,y:0}}return r(e,[{key:"packetMetadata",get:function(){return this._packet.metadata}},{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._to}},{key:"type",get:function(){return this._packet.type}},{key:"typeOrigin",get:function(){return this._typeOrigin}},{key:"move",value:function(e,t){this._from=e,this._to=t,this._typeOrigin={x:(this._from.x+this._to.x)/2,y:(this._from.y+this._to.y)/2}}}]),e}();t.NetworkHistoryEventView=o;var s=function(){function e(t){n(this,e),this._node=t,this._x=0,this._height=0}return r(e,[{key:"id",get:function(){return this._node.id}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),e}();t.NodeHistoryTimelineView=s;var a={nodeSpacing:200,timescale:.1},c=function(){function e(t,i){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this._network=t,this._history=i,this._nodeTimelinesMap=new Map,this._nodeTimelines=[],this._networkEvents=[],this._options=Object.assign(Object.assign({},a),o),t.nodes.forEach((function(e){return r.addNodeTimeline(e)})),this._networkEvents=this.buildNetworkEvents(),this._nodesSubscription=this.subscribeNodes(),this._packetsSubscription=this.subscribePackets()}return r(e,[{key:"events",get:function(){return this._networkEvents}},{key:"nodeTimelines",get:function(){return this._nodeTimelines}},{key:"destroy",value:function(){this._packetsSubscription(),this._nodesSubscription()}},{key:"subscribeNodes",value:function(){var e=this;return this._network.subscribeNodes((function(t){"reg"===t.type&&e.addNodeTimeline(t.node)}))}},{key:"addNodeTimeline",value:function(e){var t=new s(e);this._nodeTimelines.push(t),this._nodeTimelinesMap.set(e.id,t),this.arrangeNodes()}},{key:"subscribePackets",value:function(){var e=this;return this._network.subscribePackets((function(t){"received"===t.type&&(e._networkEvents=e.buildNetworkEvents())}))}},{key:"buildNetworkEvents",value:function(){var e=this._history.history.filter((function(e){return"receive"===e.type})).map((function(e){return new o(e.packet)}));return this.arrangeHistory(e),e}},{key:"arrangeNodes",value:function(){var e=this;this._nodeTimelines.forEach((function(t,i){t.x=i*e._options.nodeSpacing}))}},{key:"arrangeHistory",value:function(e){var t=this,i=1/0,n=0;e.forEach((function(e){i=Math.min(i,e.packetMetadata.sentAt),n=Math.max(n,e.packetMetadata.sentAt+e.packetMetadata.latency)})),e.forEach((function(e){var n,r,o,s,a={x:null!==(r=null===(n=t._nodeTimelinesMap.get(e.packetMetadata.sender.id))||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:t._options.timescale*(e.packetMetadata.sentAt-i)},c={x:null!==(s=null===(o=t._nodeTimelinesMap.get(e.packetMetadata.receiver.id))||void 0===o?void 0:o.x)&&void 0!==s?s:0,y:t._options.timescale*(e.packetMetadata.sentAt+e.packetMetadata.latency-i)};e.move(a,c)})),this._nodeTimelines.forEach((function(e){e.height=t._options.timescale*(n-i)}))}}]),e}();t.HistoryView=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,i){"use strict";var n=i(24),r=i(25);Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkVis=void 0;var o=i(3),s=i(1),a=i(76),c=i(78);t.NetworkVis=function(e){e.timeline;var t=e.networkView,i=e.height,u=e.width,d=e.timescale,h=e.time,l=(0,s.useState)(t.nodes),f=r(l,2),v=f[0],y=f[1],p=(0,s.useState)(t.packets),_=r(p,2),k=_[0],g=_[1];return(0,s.useEffect)((function(){var e=t.subscribeNodes((function(){return y(n(t.nodes))})),i=t.subscribePackets((function(){g(n(t.packets))}));return function(){e(),i()}}),[]),(0,o.jsxs)("svg",Object.assign({height:i,width:u,viewBox:"".concat(-i/2," ").concat(-u/2," ").concat(i," ").concat(u)},{children:[k.map((function(e){return(0,o.jsx)(c.PacketVis,{packetView:e,timescale:d,time:h},e.id)})),v.map((function(e){return(0,o.jsxs)(a.NodeVis,Object.assign({nodeView:e},{children:[e.id," x:",e.x," y:",e.y]}),e.id)}))]}),void 0)}},,function(e,t,i){"use strict";var n=i(25);Object.defineProperty(t,"__esModule",{value:!0}),t.NodeVis=void 0;var r=i(3),o=i(1),s=i(77);t.NodeVis=function(e){var t=e.nodeView,i=(0,o.useState)(!1),a=n(i,2),c=a[0],u=a[1];return(0,r.jsxs)("g",Object.assign({transform:"translate(".concat(t.x,", ").concat(t.y,")"),onClick:function(){u((function(e){return!e}))}},{children:[(0,r.jsx)("circle",{fill:t.options.color,r:t.options.radius},void 0),(0,r.jsx)("text",Object.assign({dominantBaseline:"central",textAnchor:"middle"},{children:t.id}),void 0),(0,r.jsx)("g",Object.assign({transform:"translate(-".concat(t.options.radius,", 20)")},{children:c&&(0,r.jsx)(s.NodeStateVis,{nodeView:t},void 0)}),void 0)]}),void 0)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStateVis=void 0;var n=i(3);t.NodeStateVis=function(e){var t=e.nodeView;return(0,n.jsx)("foreignObject",Object.assign({style:{width:"100%",height:"100%"}},{children:(0,n.jsx)("div",Object.assign({style:{display:"inline-block",padding:"8px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"4px",border:"solid 1px black"}},{children:(0,n.jsx)("pre",Object.assign({style:{fontSize:"13px"}},{children:JSON.stringify(t.state,null,2)}),void 0)}),void 0)}),void 0)}},function(e,t,i){"use strict";var n=i(25);Object.defineProperty(t,"__esModule",{value:!0}),t.PacketVis=void 0;var r=i(3),o=i(1),s=i(79);t.PacketVis=function(e){var t=e.packetView,i=e.timescale,a=e.time,c=(0,o.useState)(!1),u=n(c,2),d=u[0],h=u[1],l=(0,o.useRef)(null);(0,o.useEffect)((function(){l.current.style.setProperty("transform","matrix(1, 0, 0, 1, ".concat(t.from.x,", ").concat(t.from.y,")"))}),[]),(0,o.useEffect)((function(){var e=l.current;e.style.setProperty("transform",window.getComputedStyle(l.current).getPropertyValue("transform")),window.requestAnimationFrame((function(){e.style.setProperty("transition",function(e,t,i){var n=i.metadata.latency-t+i.metadata.sentAt;return"transform ".concat(n*e,"ms linear")}(i,a,t)),e.style.setProperty("transform","matrix(1, 0, 0, 1, ".concat(t.to.x,", ").concat(t.to.y,")"))}))}),[i]);return(0,r.jsxs)("g",{children:[(0,r.jsx)("marker",Object.assign({id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"},{children:(0,r.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"red"},void 0)}),void 0),(0,r.jsx)("line",{markerEnd:"url(#arrowhead)",x1:t.from.x,y1:t.from.y,x2:t.to.x,y2:t.to.y,stroke:"black"},void 0),(0,r.jsxs)("g",Object.assign({ref:l,onClick:function(){h((function(e){return!e}))}},{children:[(0,r.jsx)("circle",{fill:t.options.color,r:t.options.radius},void 0),d&&(0,r.jsx)(s.PacketStateVis,{packetView:t},void 0)]}),void 0),(0,r.jsx)("text",{fill:"blue",dominantBaseline:"central",textAnchor:"middle",x:t.origin.x,y:t.origin.y},void 0)]},void 0)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PacketStateVis=void 0;var n=i(3);t.PacketStateVis=function(e){var t=e.packetView;return(0,n.jsx)("foreignObject",Object.assign({style:{width:"100%",height:"100%"}},{children:(0,n.jsxs)("div",Object.assign({style:{display:"inline-block",padding:"8px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"4px",border:"solid 1px black"}},{children:[(0,n.jsx)("p",Object.assign({style:{fontSize:"13px",fontWeight:600}},{children:t.type}),void 0),(0,n.jsx)("pre",Object.assign({style:{fontSize:"13px"}},{children:JSON.stringify(t.body,null,2)}),void 0)]}),void 0)}),void 0)}},function(e,t,i){"use strict";var n=i(24),r=i(25);Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryVis=void 0;var o=i(3),s=i(1);t.HistoryVis=function(e){var t=e.history,i=e.network,a=(0,s.useState)([]),c=r(a,2),u=c[0],d=c[1],h=(0,s.useState)([]),l=r(h,2),f=l[0],v=l[1],y=(0,s.useState)({width:400,height:400,x:0,y:0}),p=r(y,2),_=p[0],k=p[1],g=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e=i.subscribePackets((function(){if(d(n(t.nodeTimelines)),v(n(t.events)),g.current){var e=(null===g||void 0===g?void 0:g.current).getBBox();k({width:e.width,height:e.height,x:e.x,y:e.y})}}));return function(){e()}}),[]),(0,o.jsxs)("svg",Object.assign({ref:g,width:_.width,height:_.height,viewBox:"".concat(_.x," ").concat(_.y," ").concat(_.width," ").concat(_.height)},{children:[u.map((function(e){return(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{stroke:"black",x1:e.x,y1:0,x2:e.x,y2:e.height},void 0),(0,o.jsx)("text",Object.assign({textAnchor:"middle",x:e.x,y:e.height+20},{children:e.id}),void 0)]},e.id)})),f.map((function(e){return(0,o.jsxs)("g",{children:[(0,o.jsx)("marker",Object.assign({id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"},{children:(0,o.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"red"},void 0)}),void 0),(0,o.jsx)("line",{markerEnd:"url(#arrowhead)",stroke:"black",x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y},void 0),(0,o.jsx)("text",Object.assign({textAnchor:"middle",x:e.typeOrigin.x,y:e.typeOrigin.y},{children:e.type}),void 0)]},e.packetMetadata.id)}))]}),void 0)}},,,,,,function(e,t,i){"use strict";i.r(t);var n=i(1),r=i.n(n),o=i(40),s=i.n(o),a=(i(54),i(55),i(14)),c=i(22),u=i(27);function d(e,t){var i=new c.Node(e,t,{counter:0});return i.registerHandler("ping",(function(e,n){n.counter=e.body.counter+1;var r=t.nodes.filter((function(e){return e.id!==i.id})),o=r[Math.floor(Math.random()*r.length)];return i.send("pong",{},e.metadata.sender,void 0,250),i.send("ping",{counter:n.counter},o,void 0,500),n})),t.registerNode(i),i}var h=i(33),l=i(34),f=i.n(l),v=i(103),y=i(104),p=i(101),_=i(3),k=function(e){var t=new c.Timeline,i=new c.NetworkHistory,n=new c.Network(t,i,{latencyProvider:Object(c.constantLatencyProvider)(1e3)}),r=new u.NetworkView(n,e),o=new u.HistoryView(n,i),s=d("alice",n),a=d("bob",n);return d("eve",n),s.send("ping",{counter:0},a),{timeline:t,history:i,network:n,networkView:r,historyView:o}}({nodeArrageRadius:200,nodeColorGenerator:u.goldenAngleColorGenerator,packetOptionsFactory:function(e,t){return{color:"ping"===t.type?"#ff0000":"880000",radius:"ping"===t.type?10:5}}});k.network.start();var g=function(){var e,t=Object(n.useState)(1),i=Object(a.a)(t,2),r=i[0],o=i[1],s=Object(n.useState)(k.timeline.logicTime),c=Object(a.a)(s,2),u=c[0],d=c[1];Object(n.useEffect)((function(){return e=setInterval((function(){k.timeline.tick(100/r),d(k.timeline.logicTime)}),100),function(){clearInterval(e)}}));return Object(_.jsxs)(v.a,{container:!0,flexDirection:"column",children:[Object(_.jsxs)(v.a,{container:!0,flexDirection:"column",children:[Object(_.jsx)(y.a,{children:"You can click on Node, and Packet to view State."}),Object(_.jsxs)(y.a,{children:["Timescale: ",r]}),Object(_.jsx)(p.a,{min:.01,max:10,step:.01,defaultValue:1,onChange:function(e,t){o(t)}})]}),Object(_.jsxs)(v.a,{container:!0,flexDirection:"row",children:[Object(_.jsx)("div",{className:f.a.network,children:Object(_.jsx)(h.NetworkVis,{timeline:k.timeline,networkView:k.networkView,height:600,width:600,timescale:r,time:u})}),Object(_.jsx)("div",{className:f.a.history,children:Object(_.jsx)(h.HistoryVis,{history:k.historyView,network:k.network})})]})]})},b=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(g,{})})};s.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(b,{})}),document.getElementById("root"))}]),[[86,1,2]]]);
//# sourceMappingURL=main.63d684a4.chunk.js.map