(this["webpackJsonpsimviz-react-example"]=this["webpackJsonpsimviz-react-example"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(98),t),r(n(99),t),r(n(100),t),r(n(109),t),r(n(71),t),r(n(110),t)},,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(111),t),r(n(115),t)},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(116),t),r(n(122),t)},,,function(e,t,n){e.exports={host:"pattern-page_host__3gbVy",visualization:"pattern-page_visualization__8xKPu",timeline:"pattern-page_timeline__--Wrr"}},,function(e,t,n){e.exports={main:"App_main__f_7Xj",navPane:"App_navPane__3rA0r",page:"App_page__3wESw"}},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(30),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.Packet=void 0;var o=function(){function e(t,n,r){i(this,e),this._type=t,this._body=n,this._metadata=r}return r(e,[{key:"body",get:function(){return this._body}},{key:"metadata",get:function(){return this._metadata}},{key:"type",get:function(){return this._type}}]),e}();t.Packet=o},function(e,t,n){"use strict";var i=n(30),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.PacketView=void 0;var o=n(113),s={radius:10,color:"#0000ee",showStateOnCreate:!0},a=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i(this,e),this._packet=t,this._sender=n,this._receiver=r,this._options=Object.assign(Object.assign({},s),o),this._origin=n.origin,this._from=n.origin,this._to=r.origin,this.update(t.metadata.sentAt)}return r(e,[{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._to}},{key:"origin",get:function(){return this._origin}},{key:"id",get:function(){return this._packet.metadata.id}},{key:"body",get:function(){return this._packet.body}},{key:"metadata",get:function(){return this._packet.metadata}},{key:"type",get:function(){return this._packet.type}},{key:"options",get:function(){return this._options}},{key:"update",value:function(e){var t=(0,o.segmentCircleIntersection)(this._sender.origin,this._sender.options.radius,this._sender.origin,this._receiver.origin)||this._sender.origin,n=(0,o.segmentCircleIntersection)(this._receiver.origin,this._receiver.options.radius,this._receiver.origin,this._sender.origin)||this._receiver.origin;this._from=t,this._to=n;var i=e-this._packet.metadata.sentAt,r=this._packet.metadata.sentAt+this._packet.metadata.latency-e;if(0!==r){var s=i/r,a=(t.x+n.x*s)/(1+s),c=(t.y+n.y*s)/(1+s);this._origin={x:a,y:c}}else this._origin=n}}]),e}();t.PacketView=a},function(e,t,n){"use strict";var i=n(30),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.NodeView=void 0;var o={radius:40,color:"#eeeeee"},s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this._node=t,this._origin={x:0,y:0},this._options=Object.assign(Object.assign({},o),n)}return r(e,[{key:"x",get:function(){return this._origin.x}},{key:"y",get:function(){return this._origin.y}},{key:"origin",get:function(){return this._origin}},{key:"id",get:function(){return this._node.id}},{key:"options",get:function(){return this._options}},{key:"state",get:function(){return this._node.state}},{key:"move",value:function(e){this._origin=e}}]),e}();t.NodeView=s},,,,function(e,t,n){e.exports={panel:"time-panel_panel__2v4gz"}},,,,function(e,t,n){e.exports={host:"history-panel_host__2XxYl"}},,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i=n(30),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.Timeline=void 0;var o=function(){function e(){i(this,e),this._logicTime=0,this._subscribers=new Set}return r(e,[{key:"logicTime",get:function(){return this._logicTime}},{key:"tick",value:function(e){var t=this;this._logicTime+=e,this._subscribers.forEach((function(e){return e(t._logicTime)}))}},{key:"subscribeTick",value:function(e){var t=this;return this._subscribers.add(e),function(){return t._subscribers.delete(e)}}}]),e}();t.Timeline=o},function(e,t,n){"use strict";var i=n(38),r=n(30),o=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.Network=t.randomLatencyProvider=t.constantLatencyProvider=void 0;var s=n(71),a=n(104);function c(e){return function(){return e}}t.constantLatencyProvider=c,t.randomLatencyProvider=function(e,t){return function(){return Math.random()*(t-e)+e}};var u={latencyProvider:c(500)},d=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e),this._timeline=t,this._history=n,this._packetCounter=0,this._inflightPackets=new Map,this._pendingPackets=[],this._nodes=new Map,this._tickUnsubscribe=void 0,this._nodesSubscriptions=new Set,this._packetsSubscriptions=new Set,this._options=Object.assign(Object.assign({},u),i)}return o(e,[{key:"nodes",get:function(){return Array.from(this._nodes.values())}},{key:"start",value:function(){var e=this;this._tickUnsubscribe||(this._tickUnsubscribe=this._timeline.subscribeTick((function(t){return e.onTick(t)})))}},{key:"stop",value:function(){this._tickUnsubscribe&&(this._tickUnsubscribe(),this._tickUnsubscribe=void 0)}},{key:"registerNode",value:function(e){this._nodes.set(e.id,e),this.notifyNode("reg",e)}},{key:"unregisterNode",value:function(e){var t=this._nodes.get(e);t&&(this._nodes.delete(e),this.notifyNode("unreg",t))}},{key:"sendPacket",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,u={id:this._packetCounter++,latency:void 0===o?this.getLatency():o,receiver:r,sender:n,sentAt:this._timeline.logicTime+(null!==c&&void 0!==c?c:0)},d=new s.Packet(e,t,u);return c?(this._pendingPackets=[].concat(i(this._pendingPackets),[{packet:d,senderState:(0,a.deepClone)(n.state)}]).sort((function(e,t){return e.packet.metadata.sentAt-t.packet.metadata.sentAt})),d):(this.addInflight(d),this._history.add({type:"send",packet:d,nodeState:(0,a.deepClone)(n.state)}),this.notifyPacket("sent",d),d)}},{key:"sendBroadcastPacket",value:function(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return Array.from(this._nodes.values()).filter((function(e){return e.id!==n.id})).map((function(s){return i.sendPacket(e,t,n,s,r,o)}))}},{key:"subscribeNodes",value:function(e){var t=this;return this._nodesSubscriptions.add(e),function(){return t._nodesSubscriptions.delete(e)}}},{key:"subscribePackets",value:function(e){var t=this;return this._packetsSubscriptions.add(e),function(){return t._packetsSubscriptions.delete(e)}}},{key:"getLatency",value:function(){return this._options.latencyProvider(this)}},{key:"addInflight",value:function(e){this._inflightPackets.set(e.metadata.id,e)}},{key:"removeInflight",value:function(e){this._inflightPackets.delete(e)}},{key:"onTick",value:function(e){var t=this;this._pendingPackets.forEach((function(n){n.packet.metadata.sentAt<=e&&(t.addInflight(n.packet),t._history.add({type:"send",packet:n.packet,nodeState:n.senderState}),t.notifyPacket("sent",n.packet))})),this._pendingPackets=this._pendingPackets.filter((function(t){return t.packet.metadata.sentAt>e})),this._inflightPackets.forEach((function(n,i){n.metadata.sentAt+n.metadata.latency<=e&&(t.onPacketReceived(n),t.removeInflight(i),t.notifyPacket("received",n))}))}},{key:"onPacketReceived",value:function(e){var t=this._nodes.get(e.metadata.receiver.id);t&&(t.processPacket(e),this._history.add({type:"receive",packet:e,nodeState:(0,a.deepClone)(t.state)}))}},{key:"notifyPacket",value:function(e,t){this._packetsSubscriptions.forEach((function(n){return n({type:e,packet:t})}))}},{key:"notifyNode",value:function(e,t){this._nodesSubscriptions.forEach((function(n){return n({type:e,node:t})}))}}]),e}();t.Network=d},,,,function(e,t,n){"use strict";var i=n(105),r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=void 0,t.deepClone=function e(t){return"object"!==typeof t||null===t?t:t instanceof Set?new Set(Array.from(t,e)):t instanceof Map?new Map(Array.from(t,(function(t){var n=r(t,2);return[n[0],e(n[1])]}))):t instanceof Date?new Date(t):t instanceof RegExp?new RegExp(t.source,t.flags):Object.keys(t).reduce((function(n,r){return Object.assign(n,i({},r,e(t[r])))}),Array.isArray(t)?[]:{})}},,,,,function(e,t,n){"use strict";var i=n(30),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;var o=function(){function e(t,n,r){i(this,e),this._id=t,this._network=n,this._state=r,this._handlers=new Map}return r(e,[{key:"id",get:function(){return this._id}},{key:"state",get:function(){return this._state}},{key:"send",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return this._network.sendPacket(e,t,this,n,i,r)}},{key:"processPacket",value:function(e){var t=this._handlers.get(e.type);t&&t(e,this._state)}},{key:"registerHandler",value:function(e,t){var n=this;this._handlers.set(e,(function(e,i){return n._state=t(e,i)}))}},{key:"unregisterHandler",value:function(e){this._handlers.delete(e)}}]),e}();t.Node=o},function(e,t,n){"use strict";var i=n(38),r=n(30),o=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkHistory=void 0;var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;r(this,e),this._retention=t,this._history=[]}return o(e,[{key:"history",get:function(){return this._history}},{key:"add",value:function(e){this._history=[].concat(i(this._history),[e]),this.retain()}},{key:"clear",value:function(){this.retain(0)}},{key:"retain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=void 0===e?this._retention:e,n=this._history.length-t;n<=0||this._history.splice(0,n)}}]),e}();t.NetworkHistory=s},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(112),t),r(n(72),t),r(n(73),t),r(n(114),t)},function(e,t,n){"use strict";var i=n(38),r=n(30),o=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkView=t.goldenAngleColorGenerator=void 0;var s=n(72),a=n(73);t.goldenAngleColorGenerator=function(e){return"hsl(".concat(137.508*e,",50%,75%)")};var c={nodeArrageRadius:400,nodeColorGenerator:t.goldenAngleColorGenerator,packetOptionsFactory:function(){return{}}},u=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._netowork=t,this._nodes=[],this._packets=[],this._nodeCounter=0,this._nodesSubscriptions=new Set,this._packetsSubscriptions=new Set,t.nodes.forEach((function(e){return n.addNode(e)})),this._nodeSubscription=t.subscribeNodes((function(e){return n.onNode(e)})),this._packetSubscription=t.subscribePackets((function(e){return n.onPacket(e)})),this._options=Object.assign(Object.assign({},c),i)}return o(e,[{key:"nodes",get:function(){return this._nodes}},{key:"packets",get:function(){return this._packets}},{key:"options",get:function(){return this._options}},{key:"destroy",value:function(){this._nodeSubscription(),this._packetSubscription()}},{key:"subscribeNodes",value:function(e){var t=this;return this._nodesSubscriptions.add(e),function(){return t._nodesSubscriptions.delete(e)}}},{key:"subscribePackets",value:function(e){var t=this;return this._packetsSubscriptions.add(e),function(){return t._packetsSubscriptions.delete(e)}}},{key:"onNode",value:function(e){switch(e.type){case"reg":this.addNode(e.node);break;case"unreg":this.removeNode(e.node)}}},{key:"createNodeView",value:function(e){return new a.NodeView(e,{color:this._options.nodeColorGenerator(this._nodeCounter,e,this._netowork)})}},{key:"addNode",value:function(e){var t;this._nodes=[].concat(i(this._nodes),[this.createNodeView(e)]),this.arrangeNodes(this._options.nodeArrageRadius),this._nodeCounter++,null===(t=this._nodesSubscriptions)||void 0===t||t.forEach((function(e){return e()}))}},{key:"removeNode",value:function(e){var t;this._nodes=this._nodes.filter((function(t){return t.id!==e.id})),this.arrangeNodes(this._options.nodeArrageRadius),null===(t=this._nodesSubscriptions)||void 0===t||t.forEach((function(e){return e()}))}},{key:"arrangeNodes",value:function(e){var t=this;this._nodes.forEach((function(n,i){var r=Math.cos(Math.PI-2*i*Math.PI/t._nodes.length)*e,o=-Math.sin(Math.PI-2*i*Math.PI/t._nodes.length)*e;n.move({x:r,y:o})}))}},{key:"findNodeView",value:function(e){return this._nodes.find((function(t){return t.id===e}))}},{key:"onPacket",value:function(e){switch(e.type){case"sent":this.addPacket(e.packet);break;case"received":this.removePacket(e.packet)}}},{key:"createPacketView",value:function(e){var t=this.findNodeView(e.metadata.sender.id),n=this.findNodeView(e.metadata.receiver.id);if(t&&n)return new s.PacketView(e,t,n,this._options.packetOptionsFactory(e.metadata.id,e,this._netowork))}},{key:"addPacket",value:function(e){var t,n=this.createPacketView(e);n&&(this._packets=[].concat(i(this._packets),[n]),null===(t=this._packetsSubscriptions)||void 0===t||t.forEach((function(e){return e()})))}},{key:"removePacket",value:function(e){var t;this._packets=this._packets.filter((function(t){return t.id!==e.metadata.id})),null===(t=this._packetsSubscriptions)||void 0===t||t.forEach((function(e){return e()}))}}]),e}();t.NetworkView=u},function(e,t,n){"use strict";function i(e,t,n){return Math.abs(e-t)<=n}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return i(e,t,n)?0:e-t}Object.defineProperty(t,"__esModule",{value:!0}),t.segmentCircleIntersection=void 0,t.segmentCircleIntersection=function(e,t,n,o){var s=Math.hypot(n.x-e.x,n.y-e.y),a=Math.hypot(o.x-e.x,o.y-e.y);if(!(s>t&&a>t)&&!(s<t&&a<t)){var c=function(e,t,n,r){var o=e.x*e.x+e.y*e.y-t*t,s=-2*e.x,a=-2*e.y,c=n.x*r.y-r.x*n.y,u=n.y-r.y,d=n.x-r.x;i(d,0,.001)&&(d=.001);var h=d*d+u*u,l=d*d*s+2*c*u+d*a*u,f=l*l-4*h*(o*d*d+c*c+d*a*c);if(f<0)return[];if(f<.001){var v=-l/(2*h);return[{x:v,y:(u*v+c)/d}]}var y=(-l+Math.sqrt(f))/(2*h),p=(u*y+c)/d,k=(-l-Math.sqrt(f))/(2*h);return[{x:y,y:p},{x:k,y:(u*k+c)/d}]}(e,t,n,o);if(!(c.length<1)){var u=Math.min(n.x,o.x),d=Math.max(n.x,o.x),h=Math.min(n.y,o.y),l=Math.max(n.y,o.y);return r(c[0].x,u)>=0&&r(c[0].x,d)<=0&&r(c[0].y,h)>=0&&r(c[0].y,l)<=0?c[0]:r(c[1].x,u)>=0&&r(c[1].x,d)<=0&&r(c[1].y,h)>=0&&r(c[1].y,l)<=0?c[1]:void 0}}}},function(e,t,n){"use strict";var i=n(30),r=n(31);Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryView=t.NodeHistoryTimelineView=t.NetworkHistoryEventView=void 0;var o=function(){function e(t){i(this,e),this._packet=t,this._from={x:0,y:0},this._to={x:0,y:0},this._typeOrigin={x:0,y:0}}return r(e,[{key:"packetMetadata",get:function(){return this._packet.metadata}},{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._to}},{key:"type",get:function(){return this._packet.type}},{key:"typeOrigin",get:function(){return this._typeOrigin}},{key:"move",value:function(e,t){this._from=e,this._to=t,this._typeOrigin={x:(this._from.x+this._to.x)/2,y:(this._from.y+this._to.y)/2}}}]),e}();t.NetworkHistoryEventView=o;var s=function(){function e(t){i(this,e),this._node=t,this._x=0,this._height=0}return r(e,[{key:"id",get:function(){return this._node.id}},{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),e}();t.NodeHistoryTimelineView=s;var a={nodeSpacing:200,timescale:.1},c=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this._network=t,this._history=n,this._nodeTimelinesMap=new Map,this._nodeTimelines=[],this._networkEvents=[],this._options=Object.assign(Object.assign({},a),o),t.nodes.forEach((function(e){return r.addNodeTimeline(e)})),this._networkEvents=this.buildNetworkEvents(),this._nodesSubscription=this.subscribeNodes(),this._packetsSubscription=this.subscribePackets()}return r(e,[{key:"events",get:function(){return this._networkEvents}},{key:"nodeTimelines",get:function(){return this._nodeTimelines}},{key:"destroy",value:function(){this._packetsSubscription(),this._nodesSubscription()}},{key:"subscribeNodes",value:function(){var e=this;return this._network.subscribeNodes((function(t){"reg"===t.type&&e.addNodeTimeline(t.node)}))}},{key:"addNodeTimeline",value:function(e){var t=new s(e);this._nodeTimelines.push(t),this._nodeTimelinesMap.set(e.id,t),this.arrangeNodes()}},{key:"subscribePackets",value:function(){var e=this;return this._network.subscribePackets((function(t){"received"===t.type&&(e._networkEvents=e.buildNetworkEvents())}))}},{key:"buildNetworkEvents",value:function(){var e=this._history.history.filter((function(e){return"receive"===e.type})).map((function(e){return new o(e.packet)}));return this.arrangeHistory(e),e}},{key:"arrangeNodes",value:function(){var e=this;this._nodeTimelines.forEach((function(t,n){t.x=n*e._options.nodeSpacing}))}},{key:"arrangeHistory",value:function(e){var t=this,n=1/0,i=0;e.forEach((function(e){n=Math.min(n,e.packetMetadata.sentAt),i=Math.max(i,e.packetMetadata.sentAt+e.packetMetadata.latency)})),e.forEach((function(e){var i,r,o,s,a={x:null!==(r=null===(i=t._nodeTimelinesMap.get(e.packetMetadata.sender.id))||void 0===i?void 0:i.x)&&void 0!==r?r:0,y:t._options.timescale*(e.packetMetadata.sentAt-n)},c={x:null!==(s=null===(o=t._nodeTimelinesMap.get(e.packetMetadata.receiver.id))||void 0===o?void 0:o.x)&&void 0!==s?s:0,y:t._options.timescale*(e.packetMetadata.sentAt+e.packetMetadata.latency-n)};e.move(a,c)})),this._nodeTimelines.forEach((function(e){e.height=t._options.timescale*(i-n)}))}}]),e}();t.HistoryView=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i=n(38),r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkVis=void 0;var o=n(2),s=n(0),a=n(118),c=n(120);t.NetworkVis=function(e){e.timeline;var t=e.networkView,n=e.height,u=e.width,d=e.timescale,h=e.time,l=(0,s.useState)(t.nodes),f=r(l,2),v=f[0],y=f[1],p=(0,s.useState)(t.packets),k=r(p,2),_=k[0],g=k[1];return(0,s.useEffect)((function(){var e=t.subscribeNodes((function(){return y(i(t.nodes))})),n=t.subscribePackets((function(){g(i(t.packets))}));return function(){e(),n()}}),[]),(0,o.jsxs)("svg",Object.assign({height:n,width:u,viewBox:"".concat(-n/2," ").concat(-u/2," ").concat(n," ").concat(u)},{children:[v.map((function(e){return(0,o.jsxs)(a.NodeVis,Object.assign({nodeView:e},{children:[e.id," x:",e.x," y:",e.y]}),e.id)})),_.map((function(e){return(0,o.jsx)(c.PacketVis,{packetView:e,timescale:d,time:h},e.id)}))]}),void 0)}},,function(e,t,n){"use strict";var i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.NodeVis=void 0;var r=n(2),o=n(0),s=n(119);t.NodeVis=function(e){var t=e.nodeView,n=(0,o.useState)(!1),a=i(n,2),c=a[0],u=a[1];return(0,r.jsxs)("g",Object.assign({transform:"translate(".concat(t.x,", ").concat(t.y,")"),onClick:function(){u((function(e){return!e}))}},{children:[(0,r.jsx)("circle",{fill:t.options.color,r:t.options.radius},void 0),(0,r.jsx)("text",Object.assign({dominantBaseline:"central",textAnchor:"middle"},{children:t.id}),void 0),(0,r.jsx)("g",Object.assign({transform:"translate(-".concat(t.options.radius,", 20)")},{children:c&&(0,r.jsx)(s.NodeStateVis,{nodeView:t},void 0)}),void 0)]}),void 0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStateVis=void 0;var i=n(2);t.NodeStateVis=function(e){var t=e.nodeView;return(0,i.jsx)("foreignObject",Object.assign({style:{width:"100%",height:"100%"}},{children:(0,i.jsx)("div",Object.assign({style:{display:"inline-block",padding:"8px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"4px",border:"solid 1px black"}},{children:(0,i.jsx)("pre",Object.assign({style:{fontSize:"13px"}},{children:JSON.stringify(t.state,null,2)}),void 0)}),void 0)}),void 0)}},function(e,t,n){"use strict";var i=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.PacketVis=void 0;var r=n(2),o=n(0),s=n(121);t.PacketVis=function(e){var t=e.packetView,n=e.timescale,a=e.time,c=(0,o.useState)(!1),u=i(c,2),d=u[0],h=u[1],l=(0,o.useRef)(null);(0,o.useEffect)((function(){l.current.style.setProperty("transform","matrix(1, 0, 0, 1, ".concat(t.from.x,", ").concat(t.from.y,")")),t.options.showStateOnCreate&&h(!0)}),[]),(0,o.useEffect)((function(){var e=l.current;e.style.setProperty("transform",window.getComputedStyle(l.current).getPropertyValue("transform")),window.requestAnimationFrame((function(){e.style.setProperty("transition",function(e,t,n){var i=n.metadata.latency-t+n.metadata.sentAt;return"transform ".concat(i*e,"ms linear")}(n,a,t)),e.style.setProperty("transform","matrix(1, 0, 0, 1, ".concat(t.to.x,", ").concat(t.to.y,")"))}))}),[n]);return(0,r.jsxs)("g",{children:[(0,r.jsx)("marker",Object.assign({id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"},{children:(0,r.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"red"},void 0)}),void 0),(0,r.jsx)("line",{markerEnd:"url(#arrowhead)",x1:t.from.x,y1:t.from.y,x2:t.to.x,y2:t.to.y,stroke:"black"},void 0),(0,r.jsxs)("g",Object.assign({ref:l,onClick:function(){h((function(e){return!e}))}},{children:[(0,r.jsx)("circle",{fill:t.options.color,r:t.options.radius},void 0),d&&(0,r.jsx)(s.PacketStateVis,{packetView:t},void 0)]}),void 0),(0,r.jsx)("text",{fill:"blue",dominantBaseline:"central",textAnchor:"middle",x:t.origin.x,y:t.origin.y},void 0)]},void 0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PacketStateVis=void 0;var i=n(2);t.PacketStateVis=function(e){var t=e.packetView;return(0,i.jsx)("foreignObject",Object.assign({style:{width:"100%",height:"100%"}},{children:(0,i.jsxs)("div",Object.assign({style:{display:"inline-block",padding:"8px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"4px",border:"solid 1px black"}},{children:[(0,i.jsx)("p",Object.assign({style:{fontSize:"13px",fontWeight:600}},{children:t.type}),void 0),(0,i.jsx)("pre",Object.assign({style:{fontSize:"13px"}},{children:JSON.stringify(t.body,null,2)}),void 0)]}),void 0)}),void 0)}},function(e,t,n){"use strict";var i=n(38),r=n(39);Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryVis=void 0;var o=n(2),s=n(0);t.HistoryVis=function(e){var t=e.history,n=e.network,a=(0,s.useState)([]),c=r(a,2),u=c[0],d=c[1],h=(0,s.useState)([]),l=r(h,2),f=l[0],v=l[1],y=(0,s.useState)({width:400,height:400,x:0,y:0}),p=r(y,2),k=p[0],_=p[1],g=(0,s.useRef)(null);return(0,s.useEffect)((function(){var e=n.subscribePackets((function(){if(d(i(t.nodeTimelines)),v(i(t.events)),g.current){var e=(null===g||void 0===g?void 0:g.current).getBBox();_({width:e.width,height:e.height,x:e.x,y:e.y})}}));return function(){e()}}),[]),(0,o.jsxs)("svg",Object.assign({ref:g,width:k.width,height:k.height,viewBox:"".concat(k.x," ").concat(k.y," ").concat(k.width," ").concat(k.height)},{children:[u.map((function(e){return(0,o.jsxs)("g",{children:[(0,o.jsx)("line",{stroke:"black",x1:e.x,y1:0,x2:e.x,y2:e.height},void 0),(0,o.jsx)("text",Object.assign({textAnchor:"middle",x:e.x,y:e.height+20},{children:e.id}),void 0)]},e.id)})),f.map((function(e){return(0,o.jsxs)("g",{children:[(0,o.jsx)("marker",Object.assign({id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"},{children:(0,o.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"red"},void 0)}),void 0),(0,o.jsx)("line",{markerEnd:"url(#arrowhead)",stroke:"black",x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y},void 0),(0,o.jsx)("text",Object.assign({textAnchor:"middle",x:e.typeOrigin.x,y:e.typeOrigin.y},{children:e.type}),void 0)]},e.packetMetadata.id)}))]}),void 0)}},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),o=n(34),s=n.n(o),a=(n(96),n(97),n(177)),c=n(178),u=n(174),d=n(171),h=n(46),l=n(16),f=n(15),v=n(27);function y(e,t){var n=new f.Node(e,t,{counter:0});return n.registerHandler("ping",(function(e,i){i.counter=e.body.counter+1;var r=t.nodes.filter((function(e){return e.id!==n.id})),o=r[Math.floor(Math.random()*r.length)];return n.send("pong",{},e.metadata.sender,void 0,250),n.send("ping",{counter:i.counter},o,void 0,500),i})),t.registerNode(n),n}var p=n(13),k=n(49),_=n(52),g=n.n(_),b=n(172),m=n(77),w=n.n(m),j=n(2),x=function(e){var t,n=e.timeline,r=e.onTimescale,o=e.onTime,s=Object(i.useState)(1),a=Object(p.a)(s,2),c=a[0],d=a[1];Object(i.useEffect)((function(){return t=setInterval((function(){n.tick(100/c),o&&o(n.logicTime)}),100),function(){clearInterval(t)}}));return Object(j.jsxs)("div",{className:w.a.panel,children:[Object(j.jsx)(u.a,{variant:"subtitle1",children:"You can steed up or speed down time by moving slider."}),Object(j.jsx)(b.a,{min:.01,max:10,step:.01,defaultValue:1,onChange:function(e,t){d(t),r&&r(t)}})]})},O=n(81),P=n.n(O),N=function(e){var t=e.network,n=e.historyView;return Object(j.jsx)("div",{className:P.a.host,children:Object(j.jsx)(k.HistoryVis,{history:n,network:t})})},V=function(e){var t=Object(i.useState)(1),n=Object(p.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(e.timeline.logicTime),a=Object(p.a)(s,2),c=a[0],d=a[1];return Object(i.useEffect)((function(){return e.network.start(),function(){e.network.stop()}}),[]),Object(j.jsxs)("div",{className:g.a.host,children:[Object(j.jsx)(u.a,{variant:"h4",children:e.title}),Object(j.jsx)(u.a,{variant:"subtitle1",sx:{margin:"10px 0"},children:e.brief}),e.children,Object(j.jsx)("div",{className:g.a.timeline,children:Object(j.jsx)(x,{timeline:e.timeline,onTime:function(e){return d(e)},onTimescale:function(e){return o(e)}})}),Object(j.jsxs)("div",{className:g.a.visualization,children:[Object(j.jsx)(k.NetworkVis,{timeline:e.timeline,networkView:e.networkView,height:600,width:600,timescale:r,time:c}),Object(j.jsx)(N,{historyView:e.historyView,network:e.network})]})]})},S=function(e){var t=new f.Timeline,n=new f.NetworkHistory,i=new f.Network(t,n,{latencyProvider:Object(f.constantLatencyProvider)(1e3)}),r=new v.NetworkView(i,e),o=new v.HistoryView(i,n),s=y("alice",i),a=y("bob",i);return y("eve",i),s.send("ping",{counter:0},a),{timeline:t,history:n,network:i,networkView:r,historyView:o}}({nodeArrageRadius:200,nodeColorGenerator:v.goldenAngleColorGenerator,packetOptionsFactory:function(e,t){return{color:"ping"===t.type?"#ff0000":"880000",radius:"ping"===t.type?10:5}}}),M=function(){var e=Object(i.useRef)(S);return Object(i.useEffect)((function(){return S.network.start(),function(){S.network.stop()}})),Object(j.jsx)(V,{title:"Ping - Pong example",brief:"Node sends ping to random node. Then receiver sends response, following by ping to another random node.",historyView:e.current.historyView,network:e.current.network,networkView:e.current.networkView,timeline:e.current.timeline})},E=n(54),A=n.n(E);var T=function(e){var t=new f.Timeline,n=new f.NetworkHistory,i=new f.Network(t,n,{latencyProvider:Object(f.constantLatencyProvider)(1e3)}),r=new v.NetworkView(i,e),o=new v.HistoryView(i,n),s=new f.Node("client",i,void 0),a=new f.Node("server",i,void 0);return a.registerHandler("req",(function(e,t){var n=e.body.word.split("").reverse().join("");return a.send("resp",{reverse:n},e.metadata.sender,500),t})),i.registerNode(s),i.registerNode(a),{timeline:t,history:n,network:i,networkView:r,historyView:o,sendWord:function(e){return s.send("req",{word:e},a,500)}}}({nodeArrageRadius:200}),C=n(175),H=n(170),R=function(){var e=Object(i.useRef)(T),t=Object(i.useRef)(null);return Object(i.useEffect)((function(){return e.current.network.start(),function(){e.current.network.stop()}}),[]),Object(j.jsx)(V,{title:"Request - Reply",brief:"Client sends word in request, server reverse it and sends in reply.",historyView:e.current.historyView,network:e.current.network,networkView:e.current.networkView,timeline:e.current.timeline,children:Object(j.jsxs)(C.a,{sx:{display:"flex"},alignItems:"center",children:[Object(j.jsx)(H.a,{inputRef:t,defaultValue:"foo bar"}),Object(j.jsx)(d.a,{sx:{marginLeft:"10px"},onClick:function(){var n,i;return e.current.sendWord(null!==(n=null===(i=t.current)||void 0===i?void 0:i.value)&&void 0!==n?n:"")},children:"Send Word"})]})})},I=n(55);var B=function(e){var t=new f.Timeline,n=new f.NetworkHistory,i=new f.Network(t,n,{latencyProvider:Object(f.randomLatencyProvider)(200,2e3)}),r=new v.NetworkView(i,e),o=new v.HistoryView(i,n),s=new f.Node("alice",i,void 0),a=new f.Node("bob",i,void 0),c=new f.Node("eve",i,void 0),u=new f.Node("server",i,{term:0,times:{}});return[s,a,c].forEach((function(e){e.registerHandler("survey",(function(n){var r=t.logicTime;i.sendPacket("resp",{term:n.body.term,time:r},e,n.metadata.sender)}))})),u.registerHandler("resp",(function(e,t){if(e.body.term===t.term){var n=Object(I.a)({},t.times);return n[e.metadata.sender.id]=e.body.time,Object(I.a)(Object(I.a)({},t),{},{times:n})}return t})),i.registerNode(u),i.registerNode(s),i.registerNode(a),i.registerNode(c),{timeline:t,history:n,network:i,networkView:r,historyView:o,sendSurvey:function(){u.state.term+=1,i.sendBroadcastPacket("survey",{term:u.state.term},u)}}}({nodeArrageRadius:200}),q=function(){var e=Object(i.useRef)(B);return Object(i.useEffect)((function(){return e.current.network.start(),function(){e.current.network.stop()}}),[]),Object(j.jsx)(V,{title:"Survey",brief:"Server broadcasts request to all client asking time. Clients responses with time.",historyView:e.current.historyView,network:e.current.network,networkView:e.current.networkView,timeline:e.current.timeline,children:Object(j.jsx)(C.a,{sx:{display:"flex"},alignItems:"center",children:Object(j.jsx)(d.a,{sx:{marginLeft:"10px"},onClick:function(){return e.current.sendSurvey()},children:"Send Survey"})})})},L=function(){return Object(j.jsxs)(h.a,{children:[Object(j.jsx)(a.a,{position:"static",children:Object(j.jsx)(c.a,{children:Object(j.jsx)(u.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Network Simulator"})})}),Object(j.jsxs)("div",{className:A.a.main,children:[Object(j.jsxs)("nav",{className:A.a.navPane,children:[Object(j.jsx)(u.a,{variant:"h6",component:"div",children:"Patterns"}),Object(j.jsx)(d.a,{children:Object(j.jsx)(h.b,{to:"/req-rep",style:{textDecoration:"none"},children:"Request-Reply"})}),Object(j.jsx)(d.a,{children:Object(j.jsx)(h.b,{to:"/survey",style:{textDecoration:"none"},children:"Survey"})}),Object(j.jsx)(d.a,{children:Object(j.jsx)(h.b,{to:"/ping-pong",style:{textDecoration:"none"},children:"Ping Pong"})})]}),Object(j.jsxs)("div",{className:A.a.page,children:[Object(j.jsx)(l.a,{path:"/",exact:!0,component:R}),Object(j.jsx)(l.a,{path:"/ping-pong",exact:!0,component:M}),Object(j.jsx)(l.a,{path:"/req-rep",exact:!0,component:R}),Object(j.jsx)(l.a,{path:"/survey",exact:!0,component:q})]})]})]})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root"))}],[[132,1,2]]]);
//# sourceMappingURL=main.547322be.chunk.js.map